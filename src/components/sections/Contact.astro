---
// src/components/sections/ContactSection.astro
import { contactSectionContent } from "../../data/content";

const { projectForm } = contactSectionContent;
---

<section class="dual-contact-section">
  <div class="bg-decoration">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 589 833" fill="none">
      <path d="M617.135 745.508C728.276 683.871 786.13 562.088 774.92 441.711L913.654 364.772C961.267 563.974 874.769 775.894 690.623 878.018C467.898 1001.54 184.209 915.602 59.3955 690.543C-65.4089 465.501 12.6787 180.742 235.42 57.2138C419.566 -44.9104 645.137 -6.05874 788.9 139.821L650.166 216.76C553.991 143.504 420.049 128.088 308.908 189.725C159.059 272.828 106.179 467.641 190.493 619.671C274.813 771.714 465.918 829.37 617.135 745.508Z" fill="url(#paint0_radial_1149_7199)"/>
      <defs>
        <radialGradient id="paint0_radial_1149_7199" cx="0" cy="0" r="1" gradientTransform="matrix(-223.425 592.802 -4167.55 -1897.82 435.143 266.454)" gradientUnits="userSpaceOnUse">
          <stop stop-color="#ACB4EA"/>
          <stop offset="1" stop-color="white" stop-opacity="0"/>
        </radialGradient>
      </defs>
    </svg>
  </div>

  <div class="container">
    <div class="contact-frame-wrapper">
      <div class="form-card project-card">
        <h2 class="form-title project-title">{projectForm.title}</h2>

        <form
          class="styled-form"
          action="https://formspree.io/f/xqaywpab"
          method="POST"
        >
          <div class="input-group">
            <label for="name" class="input-label"
              >{projectForm.fields.name}</label
            >
            <input type="text" id="name" name="name" required />
          </div>

          <div class="input-group">
            <label for="email" class="input-label"
              >{projectForm.fields.email}</label
            >
            <input
              type="email"
              id="email"
              name="email"
              required
            />
          </div>

          <div class="input-group full-width">
            <label for="message" class="input-label"
              >{projectForm.fields.details}</label
            >
            <textarea id="message" name="message" rows="1" class="auto-grow" maxlength="2000"
            ></textarea>
          </div>

          <button type="submit" class="btn-action-teal"
            >{projectForm.submitBtn}</button
          >
        </form>
      </div>
    </div>
  </div>
</section>

<script>
  function initAutoGrow() {
    const textareas = document.querySelectorAll('textarea.auto-grow');
    
    textareas.forEach(textarea => {
      const adjustHeight = () => {
        textarea.style.height = 'auto'; 
        textarea.style.height = textarea.scrollHeight + 'px';
      }; 
      textarea.addEventListener('input', adjustHeight);
      
      adjustHeight();
    });
  }
  initAutoGrow();
  
  document.addEventListener('astro:page-load', initAutoGrow);
</script>

<style>
  .dual-contact-section {
    padding: 6rem 0;
    background-color: var(--color-background-alt, #ffffff);
    position: relative;
    overflow: hidden;
  }

  .bg-decoration {
    position: absolute;
    width: 905.061px;
    height: 938.578px;
    transform: rotate(-29.012deg);
    
    right: -250px; 
    bottom: -300px;
    
    z-index: 0; 
    pointer-events: none; 
  }
  
  .bg-decoration svg {
    width: 100%;
    height: 100%;
    display: block;
    opacity: 0.1;
  }
  
  @media (max-width: 1024px) {
    .bg-decoration {
        width: 500px;
        height: auto;
        right: -150px;
        bottom: -100px;
    }
  }
 
  .container {
    max-width: 100%;
    margin: 0 auto;
    padding-left: var(--container-padding-x, 120px);
    padding-right: var(--container-padding-x, 120px);
  }

  .contact-frame-wrapper {
    background-color: #ffffff;
    border: 1px solid var(--gradient, #192ec5);
    padding: 2rem; 
    box-shadow: 0 28px 76px 0 rgba(32, 187, 189, 0.12);
    padding: 2rem;
    
    position: relative;
    z-index: 1;
  }

  @media (min-width: 768px) {
    .contact-frame-wrapper {
      padding: 80px;
    }
  }

  .forms-grid {
    display: grid;
    grid-template-columns: 1fr;
    gap: 4rem;
  }

  @media (min-width: 1024px) {
    .forms-grid {
      grid-template-columns: 1fr; 
      gap: 5rem;
    }
  }

  .form-card {
    display: flex;
    flex-direction: column;
    gap: 64px;
  }

  .project-title {
    color: var(--color-button-primary);
    font-family: var(--font-family-base);
    font-weight: 600; 
    font-size: 36px; 
    line-height: 120%;
  }

  @media (min-width: 768px) {
    .project-title {
      font-size: 64px; 
      line-height: 130%;
    }
  }

  .general-title {
    color: var(--TEXT, #383838);
    font-family: var(--font-family-base);
    font-weight: 600;
    font-size: 28px;
    line-height: 130%;
  }
  @media (min-width: 768px) {
    .general-title {
      font-size: 32px;
    }
  }

  .styled-form {
    display: flex;
    flex-direction: column;
    gap: 40px;
  }

  .input-group {
    display: flex;
    flex-direction: column;
    align-items: baseline;
    width: 100%;
    border-bottom: 1px solid #e0e0e0;
    padding-bottom: 16px;
    transition: border-bottom-color 0.3s ease;
  }

.input-group.full-width {
    flex-direction: column;
    align-items: flex-start;
  }

  .input-group:focus-within {
    border-bottom: 2px solid var(--color-button-primary);
  }

  .input-label {
    color: var(--TEXT, #383838);
    font-family: var(--font-family-base);
    font-weight: 400; 
    font-size: 16px;
    white-space: nowrap; 
    margin-right: 12px; 
    flex-shrink: 0;
  }

  input,
  textarea {
    padding: 0;
    border: none;
    background: transparent;
    font-family: var(--font-family-base);
    font-size: 16px;
    width: 100%;
  }

  input:focus,
  textarea:focus {
    outline: none;
    border-bottom: none;
  }

  textarea {
resize: none; 
    overflow: hidden;
    min-height: 24px; 
    line-height: 1.5;
    display: block;  }

  .submit-btn {
    margin-top: 1rem;
    padding: 1rem 2.5rem;
    background-color: var(--color-button-primary);
    color: white;
    border: none;
    border-radius: 50px; 
    font-family: var(--font-family-base);
    font-weight: 600;
    font-size: 16px;
    cursor: pointer;
    align-self: flex-start; 
    transition: all 0.3s ease;
  }

  .btn-action-teal {
    margin-top: 1.5rem; 
    padding: 1rem 2.5rem;
    background-color: #20bbbd; 
    color: white;
    border: none;
    border-radius: 4px;
    font-family: var(--font-family-base);
    font-weight: 700;
    font-size: 14px;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    cursor: pointer;
    align-self: flex-start;
    transition: all 0.3s ease;
    display: inline-flex;
    align-items: center;
    gap: 0.5rem;
  }

  .btn-action-teal:hover {
    background-color: #1aa0a2;
    transform: translateY(-2px);
  }

  .submit-btn:hover {
    background-color: #101f85; 
    transform: translateY(-2px);
  }

  .submit-btn.outline {
    background-color: transparent;
    border: 2px solid var(--TEXT, #383838);
    color: var(--TEXT, #383838);
  }

  .submit-btn.outline:hover {
    background-color: var(--TEXT, #383838);
    color: white;
  }

  @media (max-width: 900px) {
  .forms-grid {
    grid-template-columns: 1fr; 
    gap: 3rem;
  }
  
  .contact-frame-wrapper {
    padding: 2rem; 
  }

  .btn-action-teal {
    width: 100%;            
    display: flex;           
    justify-content: center; 
    align-items: center;     
    padding: 16px;          
    margin-top: 32px;       
    align-self: stretch;     
    font-size: 16px;     
  }    

  .submit-btn {
    width: 100%; 
    text-align: center;
  }
}
</style>